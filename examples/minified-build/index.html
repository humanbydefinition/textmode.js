<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Textmode.js - Minified Build Example</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        .example {
            margin: 20px 0;
            padding: 20px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        .build-info {
            background: #333;
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        canvas {
            border: 1px solid #555;
            margin: 10px 0;
        }
        .error {
            color: #ff6b6b;
            background: #2d1b1b;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success {
            color: #51cf66;
            background: #1b2d1b;
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Textmode.js - Minified Build Example</h1>
        
        <div class="build-info">
            <strong>Build Information:</strong><br>
            - Full builds include embedded UrsaFont (~47KB)<br>
            - Minified builds exclude embedded font and require fontUrl parameter<br>
            - This example demonstrates the minified build usage
        </div>

        <div class="example">
            <h2>Example 1: Minified Build with Font URL</h2>
            <p>Using the minified build with a custom font URL:</p>
            <canvas id="canvas1" width="400" height="200"></canvas>
            <div id="status1" class="build-info">Loading...</div>
        </div>

        <div class="example">
            <h2>Example 2: Error Handling</h2>
            <p>What happens when you don't provide a fontUrl with minified build:</p>
            <canvas id="canvas2" width="400" height="200"></canvas>
            <div id="status2" class="build-info">Loading...</div>
        </div>
    </div>

    <!-- Using the minified ESM build -->
    <script type="module">
        import textmode from '../../dist/textmode.min.esm.js';
        
        // Example 1: Correct usage with fontUrl
        async function example1() {
            try {
                const tm = await textmode.create({
                    canvas: document.getElementById('canvas1'),
                    fontUrl: '../fonts/Bescii-Mono.ttf', // Provide font URL for minified builds
                    fontSize: 16,
                    backgroundColor: [0, 0, 0]
                });
                
                // Draw some text
                tm.write("Hello from", 2, 2, [255, 255, 255]);
                tm.write("minified build!", 2, 3, [100, 255, 100]);
                tm.write("with custom font", 2, 4, [255, 200, 100]);
                tm.render();
                
                document.getElementById('status1').innerHTML = '<span class="success">✓ Success: Minified build with fontUrl</span>';
                document.getElementById('status1').className = 'success';
            } catch (error) {
                document.getElementById('status1').innerHTML = `<span class="error">✗ Error: ${error.message}</span>`;
                document.getElementById('status1').className = 'error';
            }
        }
        
        // Example 2: Error case - no fontUrl provided
        async function example2() {
            try {
                const tm = await textmode.create({
                    canvas: document.getElementById('canvas2'),
                    // fontUrl: missing - this should cause an error with helpful message
                    fontSize: 16,
                    backgroundColor: [0, 0, 0]
                });
                
                document.getElementById('status2').innerHTML = '<span class="error">✗ This should not succeed</span>';
                document.getElementById('status2').className = 'error';
            } catch (error) {
                document.getElementById('status2').innerHTML = `<span class="error">✓ Expected Error: ${error.message}</span>`;
                document.getElementById('status2').className = 'build-info';
            }
        }
        
        // Run examples
        example1();
        example2();
    </script>
</body>
</html>
